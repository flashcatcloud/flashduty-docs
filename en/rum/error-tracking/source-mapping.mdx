---
title: "Source Mapping and Error Tracking"
description: "This document details how to use FlashCat RUM for source map management, and how to perform error tracking and debugging through source mapping."
---

[Flashduty CLI](https://github.com/flashcatcloud/flashcat-cli) is a command-line tool that supports uploading `sourcemap` files to the Flashduty server. Through `sourcemap`, frontend developers can more efficiently perform error tracking and debugging.

Users can view uploaded `sourcemap` files in the "Application Management" - "Source Code Management" menu, and generate scripts through the upload panel to execute uploads locally.

## Why Do You Need SourceMap?

In modern frontend development, JavaScript and CSS files are typically minified and obfuscated to optimize loading speed and performance. However, this minification causes code location information in error stacks to not directly map to the original source code, increasing debugging difficulty.

<CardGroup cols={3}>
  <Card title="Map Minified Code" icon="map">
    `SourceMap` records the mapping relationship between minified code and original code, allowing developers to view unminified source code during debugging
  </Card>
  <Card title="Precise Error Location" icon="crosshairs">
    Through `SourceMap`, you can directly locate the specific position in the original source code in error tracking
  </Card>
  <Card title="Improve Debugging Efficiency" icon="gauge-high">
    Developers don't need to manually decode minified files, saving time troubleshooting issues
  </Card>
</CardGroup>

## Generate SourceMap

Most modern build tools (such as Webpack, Rollup, or Vite) support generating `SourceMap`.

<Tabs>
  <Tab title="Webpack">
    Enable `SourceMap` generation in `webpack.config.js`:

    ```javascript
    module.exports = {
      mode: "production",
      devtool: "source-map", // Generate separate .map files
      output: {
        filename: "bundle.js",
        path: path.resolve(__dirname, "dist"),
      },
    };
    ```

    After building, the `dist` directory will contain `bundle.js` and the corresponding `bundle.js.map` file.
  </Tab>
  <Tab title="Vite">
    Configure in `vite.config.js`:

    ```javascript
    export default {
      build: {
        sourcemap: true, // Generate sourcemap
      },
    };
    ```
  </Tab>
  <Tab title="Rollup">
    Configure in `rollup.config.js`:

    ```javascript
    export default {
      output: {
        sourcemap: true,
      },
    };
    ```
  </Tab>
</Tabs>

## Upload SourceMap

Use Flashduty CLI to upload `sourcemap` files to the Flashduty server.

<Steps>
  <Step title="Install Flashduty CLI">
    Ensure Node.js is installed, then install via npm:

    ```bash
    npm install -g @flashcloud/flashcat-cli
    ```
  </Step>
  <Step title="Configure Upload Parameters">
    <Frame>
      <img src="https://docs-cdn.flashcat.cloud/imges/png/69c1c53e5df18d5241d8e0fa17e56198.png" alt="Upload Source Code Configuration" />
    </Frame>

    In the "Application Management" - "Source Code Management" menu, click the "Upload Source Code" panel and fill in the following information:

    <ParamField path="API Key" type="string" required>
      Used to authenticate your identity
    </ParamField>

    <ParamField path="Service Name" type="string" required>
      Application service name (e.g., `my-service`)
    </ParamField>

    <ParamField path="Version" type="string" required>
      Application release version (e.g., `1.0.0`)
    </ParamField>

    <ParamField path="Minified Path Prefix" type="string" required>
      Path prefix for minified files (e.g., `/assets`)
    </ParamField>
  </Step>
  <Step title="Execute Upload">
    Run the generated script in the project root directory:

    ```bash
    flashcat-cli sourcemaps upload \
      --service my-service \
      --release-version 1.0.0 \
      --minified-path-prefix /assets \
      --api-key your-api-key \
      ./dist
    ```
  </Step>
</Steps>

<Warning>
- Ensure `minified-path-prefix` matches the actual deployed minified file path
- After successful upload, you can view uploaded `sourcemap` files in "Application Management" - "Source Code Management"
</Warning>

## SourceMap Management

On the Flashduty platform, `sourcemap` file management is done through the "Application Management" - "Source Code Management" menu:

| Feature | Description |
|---------|-------------|
| View Uploaded SourceMaps | List all uploaded files, including path, service name, version, size, and upload time |
| Version Management | Manage different application versions separately through `service` and `release-version` parameters |
| Permission Control | Ensure only authorized users can upload or manage through `API Key` |

## View Source Code in Error Tracking

Flashduty RUM integrates `sourcemap` functionality, supporting direct viewing of original source code in the Error Tracking module for precise problem localization.

<Steps>
  <Step title="Capture Frontend Errors">
    Flashduty RUM SDK automatically captures frontend errors (such as JavaScript exceptions, Promise rejections, network errors, etc.) and sends error stack information to the server.

    ```javascript
    throw new Error("Something went wrong");
    ```
  </Step>
  <Step title="Associate SourceMap">
    When the file path and line number in the error stack match an uploaded `sourcemap`, Flashduty automatically maps the minified code error location to the original source code.

    **Minified file stack:**
    ```
    Error: Something went wrong
        at Object.<anonymous> (/assets/index-5e0391ac.js:1:123)
    ```

    **Mapped source code:**
    ```
    Error: Something went wrong
        at App.render (src/components/App.js:45:10)
    ```
  </Step>
  <Step title="View Error Details">
    In the Error Tracking module, click a specific error record to view:

    - **Error message**: e.g., `Something went wrong`
    - **Original stack**: Mapped source code file path, line number, and column number
    - **Context code**: Display source code snippet near the error location
  </Step>
  <Step title="Debug and Fix">
    Based on the mapped source code location, find the corresponding code directly in your local development environment, analyze the root cause, and fix it.
  </Step>
</Steps>

## Best Practices

<AccordionGroup>
  <Accordion title="Standardize SourceMap Upload">
    Integrate upload commands in CI/CD pipelines to ensure automatic `sourcemap` upload with each release.

    **GitHub Actions Example:**
    ```yaml
    - name: Upload SourceMaps
      run: |
        flashcat-cli sourcemaps upload \
          --service my-service \
          --release-version ${{ github.sha }} \
          --minified-path-prefix /assets \
          --api-key ${{ secrets.FLASHCAT_API_KEY }} \
          ./dist
    ```
  </Accordion>
  <Accordion title="Version Management">
    Use the `--release-version` parameter to match the application version number for easy tracking of specific version `sourcemaps`.
  </Accordion>
  <Accordion title="Clean Up Source Code">
    Delete `sourcemap` files before uploading resources to CDN to avoid bringing source code information into production.
  </Accordion>
  <Accordion title="Test Mapping Effect">
    After uploading `sourcemap`, proactively throw test errors to verify that the Error Tracking module correctly maps to source code.
  </Accordion>
</AccordionGroup>

## Frequently Asked Questions

<AccordionGroup>
  <Accordion title="Why isn't the error stack mapped to source code?">
    - Confirm that `sourcemap` was successfully uploaded and `minified-path-prefix` matches the actual deployment path
    - Check that `service` and `release-version` match the application version when the error occurred
  </Accordion>
  <Accordion title="How to prevent SourceMap from leaking sensitive information?">
    - Ensure `sourcemap` files are only uploaded to the Flashduty server, not directly exposed on the public network
    - In production, remove direct access to `sourcemap` files (e.g., through Nginx configuration)
  </Accordion>
  <Accordion title="What if SourceMap upload fails?">
    - Check if `API Key` is valid
    - Ensure network connection is normal and CLI version is the latest
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Error Grouping" icon="layer-group" href="./error-aggregation">
    Learn about error grouping mechanisms
  </Card>
  <Card title="Issue Status" icon="circle-check" href="./issue-status">
    Manage Issue status transitions
  </Card>
</CardGroup>
