---
title: "路由规则"
description: "路由规则用于共享集成，根据告警属性将事件分发到对应的协作空间，实现告警的分类处理"
keywords: ["路由规则", "告警路由", "分发策略", "协作空间", "分类处理"]
---


{/*
## 视频介绍
<video
  controls
  className="w-full aspect-video rounded-xl"
  src="https://download.flashcat.cloud/flashduty/video/routings.mp4"
></video>

*/}

## 配置路由规则

进入 集成中心 → 告警事件 → 集成详情 → **路由** → **添加路由**。

### 配置说明

| 配置项 | 说明 |
| :--- | :--- |
| **匹配条件** | 按标签、属性等条件筛选告警，支持精确、通配符、正则匹配 |
| **路由模式** | 见下方详细说明 |
| **流程控制** | **继续匹配**（默认）：命中后继续匹配后续规则；**停止匹配**：命中后不再匹配 |
| **默认路由** | 兜底规则，当所有规则都不匹配时生效 |

### 路由模式

| 模式 | 说明 | 适用场景 |
| :--- | :--- | :--- |
| **标准路由** | 手动选择目标协作空间 | 告警与空间对应关系固定 |
| **名称映射** | 将指定标签的值映射为协作空间名称，自动投递 | 告警已携带业务标识且空间名与标签值一致 |

<Warning>
使用名称映射模式时，如对应空间不存在，则投递至默认路由或丢弃。
</Warning>

<Frame>
<img src="https://docs-cdn.flashcat.cloud/images/png/e3a143b9a64a8a11045402530119f5eb.png" alt="路由规则配置" />
</Frame>

### 操作技巧

| 功能 | 说明 |
| :--- | :--- |
| 调整顺序 | 使用上下箭头或拖动规则以及按协作空间调整匹配优先级 |
| 插入规则 | 在指定规则前后快速插入新规则 |
| 筛选规则 | 可以按协作空间筛选出投递到该空间的所有规则 |
| 编辑历史 | 查看历史配置并快速恢复到某个版本 |

## 配置示例

<Tabs>
<Tab title="按业务组路由">
**场景**：将监控平台中相同业务组的告警投递到对应协作空间。

| 配置项 | 值 |
| :--- | :--- |
| **匹配条件** | `Labels.group_name` 等于 `Flashduty` |
| **路由模式** | 标准路由 |
| **投递空间** | Flashduty |

<Frame>
<img src="https://docs-cdn.flashcat.cloud/images/png/f2db7a22f7c1998cd541c2d00fa3a3e8.png" alt="按业务组路由" />
</Frame>
</Tab>

<Tab title="按告警级别路由">
**场景**：将 Critical 级别告警投递到核心业务空间，其他级别投递到常规空间。

| 规则顺序 | 匹配条件 | 投递空间 | 流程控制 |
| :--- | :--- | :--- | :--- |
| 1 | `severity` 等于 `Critical` | SRE 空间 | 停止匹配 |
| 2 | 默认路由 | 常规告警空间 | - |

<Frame>
<img src="https://docs-cdn.flashcat.cloud/images/png/554c85b58082d15744f6b878f0473b8e.png" alt="按告警级别路由" />
</Frame>
</Tab>

<Tab title="名称映射模式">
**场景**：告警标签中已包含业务线标识（如 `Labels.team=payment`），且协作空间名称与标签值一致。

| 配置项 | 值 |
| :--- | :--- |
| **匹配条件** | 全部告警 |
| **路由模式** | 名称映射 |
| **映射标签** | `Labels.team` |

**效果**：`Labels.team=payment` 的告警自动投递到名为 `payment` 的协作空间。

<Frame>
<img src="https://docs-cdn.flashcat.cloud/images/png/6e42dbbbf0ebfc9d3adb9061718b28e0.png" alt="名称映射模式" />
</Frame>

<Tip>
使用名称映射模式前，请确保协作空间名称与标签值完全一致，否则告警将投递到默认路由。
</Tip>
</Tab>
</Tabs>

## 常见问题

<AccordionGroup>
<Accordion title="路由规则没有生效？">
检查告警事件的属性/标签是否与规则匹配，以及规则配置是否正确。
</Accordion>

<Accordion title="多条规则匹配到相同告警，投递到相同空间会怎样？">
每个协作空间都会生成对应的故障。建议在同一规则中选择多个空间，避免重复。
</Accordion>

<Accordion title="配置路由规则后收不到告警了？">
确认上报的告警能命中配置的路由规则。建议配置默认兜底路由接收无法匹配的告警。
</Accordion>

<Accordion title="流程控制选择「停止」时，是否还会匹配默认路由？">
会。默认路由是兜底规则，不受流程控制限制。
</Accordion>
</AccordionGroup>

## 延伸阅读

<CardGroup cols={2}>
<Card title="接入告警" icon="plug" href="/zh/on-call/channel/integrate-data">
了解专属集成与共享集成的区别
</Card>
<Card title="配置过滤条件" icon="filter" href="/zh/on-call/configuration/filter-conditions">
了解条件匹配语法
</Card>
<Card title="配置标签增强" icon="tags" href="/zh/on-call/integration/alert-integration/label-enhancement">
动态生成或修改告警标签
</Card>
<Card title="配置告警处理" icon="wand-magic-sparkles" href="/zh/on-call/integration/alert-integration/alert-pipelines">
在源头清洗和转换告警数据
</Card>
</CardGroup>
